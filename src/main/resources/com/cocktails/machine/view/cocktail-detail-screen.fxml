<?xml version="1.0" encoding="UTF-8"?>

<?import io.github.palexdev.materialfx.controls.MFXButton?>
<?import io.github.palexdev.mfxresources.fonts.MFXFontIcon?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.text.Text?>

<VBox xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
        fx:controller="com.cocktails.machine.ui.controller.CocktailDetailScreenController"
        styleClass="main-background">

    <!-- Main Content -->
    <HBox VBox.vgrow="ALWAYS" styleClass="main-background">
        <!-- Sidebar with floating appearance -->
        <VBox spacing="8" prefWidth="240" minWidth="240" maxWidth="240" HBox.hgrow="NEVER" styleClass="sidebar">
            <HBox.margin>
                <Insets top="16" bottom="16" left="16" right="16"/>
            </HBox.margin>
            <padding>
                <Insets top="16" bottom="16" left="16" right="16"/>
            </padding>

            <!-- Back Button - Apple HIG: 44px minimum touch target -->
            <MFXButton fx:id="backButton" text="Back" prefHeight="44" maxWidth="Infinity" buttonType="FLAT" graphicTextGap="12">
                <graphic>
                    <MFXFontIcon description="fas-arrow-left" size="20.0"/>
                </graphic>
            </MFXButton>

            <!-- Favourite Button - Apple HIG: 44px minimum touch target -->
            <MFXButton fx:id="favoriteButton" text="Favourite" prefHeight="44" maxWidth="Infinity" buttonType="FLAT" graphicTextGap="12">
                <graphic>
                    <MFXFontIcon fx:id="favoriteIcon" description="fas-star" size="20.0"/>
                </graphic>
            </MFXButton>

            <Region VBox.vgrow="ALWAYS"/>

            <!-- Reload Button - Apple HIG: 44px minimum touch target -->
            <MFXButton fx:id="reloadButton" text="Reload" prefHeight="44" maxWidth="Infinity" buttonType="FLAT" graphicTextGap="12">
                <graphic>
                    <MFXFontIcon description="fas-circle" size="20.0" styleClass="icon-black"/>
                </graphic>
            </MFXButton>

            <!-- Exit Button - Apple HIG: 44px minimum touch target -->
            <MFXButton fx:id="exitButton" text="Exit" prefHeight="44" maxWidth="Infinity" buttonType="FLAT" graphicTextGap="12">
                <graphic>
                    <MFXFontIcon description="fas-circle" size="20.0" styleClass="icon-black"/>
                </graphic>
            </MFXButton>
        </VBox>

        <Region prefWidth="2" minWidth="2" maxWidth="2" HBox.hgrow="NEVER"/>

        <!-- Main Content Area - Apple HIG: generous padding, clear hierarchy -->
        <VBox HBox.hgrow="ALWAYS" alignment="CENTER" styleClass="content-background" maxWidth="Infinity" maxHeight="Infinity">
            <padding>
                <Insets top="48" bottom="48" left="48" right="48"/>
            </padding>
            <spacing>40</spacing>

            <!-- Cocktail Name - Apple HIG: Large title, clear hierarchy -->
            <Label fx:id="cocktailName" styleClass="cocktail-detail-name"/>

            <!-- Fixed Height Container to prevent layout shift - Apple HIG -->
            <VBox alignment="CENTER" spacing="40" prefHeight="400" maxHeight="400" minHeight="400">
                <!-- Play Button and Progress Container - Apple HIG: same space to prevent drift -->
                <StackPane prefWidth="300" prefHeight="280">
                    <!-- Cocktail Image as Background - Apple HIG: Visual representation behind play button -->
                    <ImageView fx:id="cocktailImage" fitWidth="300" fitHeight="280" preserveRatio="true" pickOnBounds="true" opacity="0.7" translateX="10">
                        <StackPane.alignment>CENTER</StackPane.alignment>
                    </ImageView>

                    <!-- Play Button Container - Apple HIG: centered, proper spacing, elegant design -->
                    <StackPane fx:id="playButtonContainer" prefWidth="200" prefHeight="200">
                        <Circle radius="100" styleClass="play-button-circle"/>
                        <MFXButton fx:id="playButton" text="" buttonType="RAISED" prefWidth="200" prefHeight="200"
                                styleClass="play-button-container">
                            <graphic>
                                <MFXFontIcon description="fas-play" size="56.0" styleClass="play-button-icon"/>
                            </graphic>
                        </MFXButton>
                    </StackPane>

                    <!-- Progress Indicator (hidden initially) - Apple HIG: clear visual feedback -->
                    <StackPane fx:id="progressContainer" visible="false" prefWidth="200" prefHeight="200">
                        <!-- Progress Circle - Apple HIG: large, clear, centered -->
                        <Circle radius="100" styleClass="progress-background-circle"/>
                        <Circle fx:id="progressCircle" radius="100" styleClass="progress-circle"/>
                        <Text fx:id="progressLabel" text="0%" textAlignment="CENTER" styleClass="progress-label"/>
                    </StackPane>
                </StackPane>

                <!-- Ingredients and Progress Text Container - Apple HIG: same space to prevent drift -->
                <StackPane prefWidth="600" prefHeight="120" maxHeight="120" alignment="TOP_LEFT">
                    <padding>
                        <Insets left="350"/>
                    </padding>
                    <VBox fx:id="ingredientsContainer" spacing="8" maxHeight="120">
                        <!-- Ingredients will be added dynamically -->
                    </VBox>
                    <Text fx:id="progressText"
                            text="Dispensing in progress..."
                            styleClass="progress-text"
                            visible="false">
                    </Text>
                </StackPane>
            </VBox>
        </VBox>
    </HBox>
</VBox>

